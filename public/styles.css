/* ===========================
   EMUDriverTraining â€” styles
   =========================== */

/* ---- åŸºæœ¬ä½ˆæ™¯(äº®è‰²æ¨¡å¼) ---- */
:root, [data-theme="light"]{
  --bg:#ffffff;
  --panel:#f5f5f5;
  --fg:#0e1524;
  --fg-invert:#e7eaf3;
  --muted:#6b778d;
  --muted-invert:#9aa3b2;
  --line:#dfe3ee;
  --line-invert:#2a3142;
  --accent:#7aa2ff;

  --radius:14px;
  --maxw:none;

  /* çµ±ä¸€ç¸®æ’åƒæ•¸ */
  --indent: 28px;

  /* æŠ˜ç–Šæ¨¹ç‹€è¦–è¦º */
  --gutter: 20px;
  --rail-w: 1.5px;
  --bullet-size: 8px;
  --rail: #dbe1f1;
  --bullet: #6b778d;

  /* æ°´å¹³ / å‚ç›´å¾®èª¿ */
  --bullet-nudge-x: -2px;
  --bullet-nudge-y: 0px;

  /* ç›´ç·šç«¯é»èˆ‡åœ“é»çš„å®‰å…¨è·ï¼ˆé¿å…ç©¿å‡ºåœ“é»ï¼‰ */
  --rail-cap: -5px;

  /* hover é¡è‰² */
  --heading-hover:#009AFF;

  /* åªé‡å°ç¬¬ä¸€å±¤ç´šåœ“é»çš„é¡å¤–å‚ç›´å¾®èª¿ï¼ˆæ­£æ•¸=å¾€ä¸‹ï¼‰ */
  --bullet-nudge-y-l1: 1px;

  /* ===== å‹•ç•« tokens ===== */
  --ease-smooth: cubic-bezier(.22,.61,.36,1);
  --dur-fast: 160ms;     /* opacity/å°è®ŠåŒ– */
  --dur-med: 200ms;      /* é«˜åº¦å‹•ç•« 180â€“220ms ä¹‹é–“ */
}

/* ---- æš—è‰²æ¨¡å¼ ---- */
[data-theme="dark"]{
  --bg:#0b0c0f;
  --panel:#11131a;
  --fg:#e7eaf3;
  --fg-invert:#0e1524;
  --muted:#9aa3b2;
  --muted-invert:#6b778d;
  --line:#262b36;
  --line-invert:#dfe3ee;
  --rail:#2a3142;
  --bullet:#9aa3b2;
  --heading-hover:#009AFF;
}

@media (prefers-reduced-motion: reduce){
  :root{
    --dur-fast: 1ms;
    --dur-med: 1ms;
  }
}

html,body{
  height:100%;
  overflow-x: auto;
  overflow-y: auto;
}
body{
  margin:0;
  color:var(--fg);
  font:16px/1.65 ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans TC",sans-serif;
  background:var(--bg);
}

/* æš—è‰²æ¨¡å¼æ¼¸å±¤èƒŒæ™¯ */
[data-theme="dark"] body{
  background:linear-gradient(180deg,var(--bg),#0f131d);
}

/* å…è¨±å…§å®¹æ°´å¹³å»¶ä¼¸ */
.wrap{
  max-width: none;
  margin:0 auto;
  padding:20px 16px 60px;
  overflow-x: auto;
  overflow-y: visible;
}

/* å¯ä¾éœ€æ±‚éš±è—é é¦–èˆ‡æ¨™é¡Œåˆ— */
.hdr{ display:none; }
.titlebar{ display:none; }

/* å¡ç‰‡å®¹å™¨ */
.card{
  background: transparent;
  border: none;
  border-radius: 0;
  box-shadow: none;
  overflow: visible;
  min-width: min-content;
  width: fit-content;
}
.content{
  padding: 0;
  min-width: min-content;
  width: fit-content;
  overflow: visible;
}

/* Markdown æ–‡å­—æ’ç‰ˆï¼ˆç²¾ç°¡ï¼‰ */
.md-root h1{
  font-size:28px;
  margin:12px 0 14px;
  max-width: 80vw;
  word-wrap: break-word;
  overflow-wrap: break-word;
}
.md-root p{
  margin:10px 0;
  max-width: 80vw;
  word-wrap: break-word;
  overflow-wrap: break-word;
  white-space: normal;
}
.md-root img{
  max-width: 80vw;
  height:auto;
  display:block;
  margin:10px auto;
  border-radius:8px;
}
pre{
  background:#0001;
  padding:12px;
  border-radius:8px;
  max-width: 80vw;
  overflow-x: auto;
  word-wrap: break-word;
}

/* å–æ¶ˆç€è¦½å™¨é è¨­æ¸…å–®ç¸®æ’ï¼Œäº¤çµ¦ .section æ§åˆ¶ç¸®æ’ */
.md-root ul, .md-root ol{
  list-style-position: outside;
  padding-left: 0;
  margin-left: 0;
}

/* ===========================
   Roam é¢¨æ¨¹ç‹€
   =========================== */

.section{
  position: relative;
  margin-left: var(--indent);
  padding-left: var(--gutter);
  min-width: fit-content;
}
.section[style*="--depth: 0"]{
  margin-left: 0;
}

.section-body{
  position: relative;
  min-width: fit-content;
}

/* å°è»Œ */
.section-body::before{
  content:"";
  position:absolute;
  left: calc(-1 * var(--gutter) + (var(--gutter) / 2) - (var(--rail-w) / 2) + 4px);
  top: var(--rail-cap);
  bottom: var(--rail-cap);
  width: var(--rail-w);
  background: var(--rail);
  pointer-events: none;
  z-index: 0;
  display: none;
}
.section.expanded.has-children > .section-body::before{
  display: block;
}

/* ===== å°è»Œè„ˆè¡ï¼ˆå±•é–‹æ™‚ 600ms ä¸€æ¬¡ï¼‰ ===== */
@keyframes railPulse {
  0% { opacity: .0; }
  30% { opacity: .7; }
  100% { opacity: .3; }
}
.section-body.pulse::before{
  animation: railPulse 600ms var(--ease-smooth) 1;
}

/* æ¨™é¡Œåˆ—ï¼ˆåœ“é»èˆ‡æ–‡å­—ï¼‰ */
.section > [role="heading"]{
  position: relative;
  z-index: 1;
  transition: color .15s ease;
  max-width: none;
  word-wrap: break-word;
  overflow-wrap: break-word;
  white-space: normal;
  min-width: fit-content;

  /* é—œéµï¼šè®“åœ“é»ä»¥ã€Œç¬¬ä¸€è¡Œã€ç‚ºåŸºæº– */
  align-items: flex-start;
}

/* ğŸ”• åœ–ç‰‡æ¨™é¡Œçš„åœ“é»ã€Œéš±è—ä½†ä¿ç•™ä½ç½®ã€ */
.section.image-heading > [role="heading"]::before{
  visibility: hidden; /* åªéš±è—ï¼Œä¸ç§»é™¤ä½ˆå±€ç©ºé–“ */
}

/* é¡å¤–ä¿éšªï¼ˆæ”¯æ´ :has çš„ç€è¦½å™¨ï¼‰â€”â€” è‹¥æ¨™é¡Œåªæœ‰ä¸€å¼µåœ–ç‰‡ä¹Ÿéš±è—åœ“é» */
.section > [role="heading"]:has(> img:only-child)::before,
.section > [role="heading"]:has(> p:only-child > img:only-child)::before{
  visibility: hidden;
}

/* åªä¿®æ­£ã€Œç¬¬ä¸€å±¤ç´šã€åœ“é»çš„å‚ç›´ç½®ä¸­å¾®èª¿ï¼ˆä¸å½±éŸ¿å…¶ä»–å±¤ç´šï¼‰ */
.section[style*="--depth: 0"] > [role="heading"]::before{
  margin-top: calc(
    (var(--h-sub-line-height) * 1em - var(--bullet-size)) / 2
    + var(--bullet-nudge-y-l1, 1px)
  );
}

/* hover æ•ˆæœ */
.section.has-children > [role="heading"]:hover,
.section.has-children > [role="heading"]:focus-visible{
  color: var(--heading-hover);
  outline: none;
}

/* ===== æ¨™é¡Œã€Œé«˜äº®æ¶ˆé€€ã€ï¼šæ–°å±•é–‹ç¯€é» 800ms æŸ”å…‰ ===== */
.section.just-opened > [role="heading"]{
  position: relative;
}
.section.just-opened > [role="heading"]::after{
  content:"";
  position:absolute; inset:-2px -6px;
  background: currentColor;
  opacity:.08; border-radius:8px; pointer-events:none;
  animation: headGlow 800ms var(--ease-smooth) 1 forwards;
}
@keyframes headGlow{
  from{ opacity:.10; } to{ opacity:0; }
}

/* ===== å±•é–‹/æ”¶åˆï¼šçµ²æ»‘é«˜åº¦ + æ·¡å…¥ ===== */
.section-body.animating{
  overflow: hidden;
  will-change: height, opacity;
  transition:
    height var(--dur-med) var(--ease-smooth),
    opacity var(--dur-fast) linear;
}
.section.expanded > .section-body{ opacity: 1; }
.section:not(.expanded) > .section-body{ opacity: .0; }

/* æ”¶åˆç‹€æ…‹ï¼ˆå‹•ç•«çµæŸå¾Œæ‰åŠ ä¸Šï¼‰ */
.section-body.collapsed{ display:none; }

/* å…§å®¹å€å¡Šä¸Šä¸‹è· */
.section-body > *{ margin-block: .35rem .35rem; }

/* å…§æ–‡åœ–ç‰‡èˆ‡æ®µè½å¯¬åº¦é™åˆ¶ */
.section-body img{
  margin-left: .25rem;
  max-width: 80vw;
}
.section-body p,
.section-body > *:not(.section):not(ul):not(ol) {
  max-width: 80vw;
  word-wrap: break-word;
  overflow-wrap: break-word;
  white-space: normal;
}

/* å…§éƒ¨ ul/ol */
.section-body ul, .section-body ol{
  padding-left: 0;
  margin-left: 0;
  list-style: none;
}

/* å¯èƒ½æ®˜ç•™çš„åŸç”Ÿ li */
.section-body li{
  margin-left: var(--indent);
  word-wrap: break-word;
}

/* ===== ç´”åœ–ç‰‡æ¨™é¡Œï¼šå½±å­æ”¶åˆï¼ˆå±•é–‹æ™‚æ¥µæ·¡å‡èµ·ï¼‰ ===== */
.section.image-heading > [role="heading"] img{
  transition: filter var(--dur-med) var(--ease-smooth),
              transform var(--dur-med) var(--ease-smooth);
  filter: none;
  transform: translateY(0);
}
.section.image-heading.expanded > [role="heading"] img{
  filter: drop-shadow(0 6px 16px rgba(0,0,0,.18));
  transform: translateY(-2px);
}

/* é€£çµé¢¨æ ¼ */
.md-root a{
  color:var(--accent);
  text-decoration:none;
  word-wrap: break-word;
  overflow-wrap: break-word;
}
.md-root a:hover{ text-decoration:underline; }

/* æ²è»¸ç¾åŒ–(äº®è‰²æ¨¡å¼) */
:root::-webkit-scrollbar,
[data-theme="light"]::-webkit-scrollbar { width: 10px; height: 10px; }
:root::-webkit-scrollbar-track,
[data-theme="light"]::-webkit-scrollbar-track { background: rgba(0,0,0,0.05); }
:root::-webkit-scrollbar-thumb,
[data-theme="light"]::-webkit-scrollbar-thumb { background: rgba(0,0,0,0.2); border-radius: 5px; }
:root::-webkit-scrollbar-thumb:hover,
[data-theme="light"]::-webkit-scrollbar-thumb:hover { background: rgba(0,0,0,0.3); }

/* æ²è»¸ç¾åŒ–(æš—è‰²æ¨¡å¼) */
[data-theme="dark"]::-webkit-scrollbar { width: 10px; height: 10px; }
[data-theme="dark"]::-webkit-scrollbar-track { background: rgba(255,255,255,0.05); }
[data-theme="dark"]::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.2); border-radius: 5px; }
[data-theme="dark"]::-webkit-scrollbar-thumb:hover { background: rgba(255,255,255,0.3); }